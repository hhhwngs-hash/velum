document.addEventListener("DOMContentLoaded", () => {
  const mensaje = document.getElementById("mensaje-encuesta");
  const form = document.getElementById("form-encuesta");
  const resultadosDiv = document.getElementById("resultados");
  const listaResultados = document.getElementById("lista-resultados");

  // ðŸ”¥ SIEMPRE visible (para pruebas)
  mensaje.style.display = "none";
  form.style.display = "block";

  let votos = JSON.parse(localStorage.getItem("votos")) || {
    Sofia: 0,
    Mateo: 0,
    Valeria: 0,
    Lucas: 0
  };

  form.addEventListener("submit", (e) => {
    e.preventDefault();
    const elegido = document.querySelector("input[name='sospechoso']:checked");
    if (!elegido) return alert("Debes seleccionar un sospechoso");

    votos[elegido.value]++;
    localStorage.setItem("votos", JSON.stringify(votos));

    form.style.display = "none";
    resultadosDiv.style.display = "block";
    listaResultados.innerHTML = "";

    for (let [nombre, cantidad] of Object.entries(votos)) {
      const li = document.createElement("li");
      li.textContent = `${nombre}: ${cantidad} votos`;
      listaResultados.appendChild(li);
    }
  });
});